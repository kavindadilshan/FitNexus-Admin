<div [class]="'app-page-title ' + globals.pageTitleStyle + ' ' + globals.pageTitleBackground"
     [ngClass]="{
    'app-page-title--shadow' : globals.pageTitleShadow
    }">
  <div>
    <ol *ngIf="globals.pageTitleBreadcrumb" class="app-page-title--breadcrumb breadcrumb">
      <li class="breadcrumb-item">
        <a routerLink="/">
          <fa-icon [icon]="['fas', 'tachometer-alt']"></fa-icon>
        </a>
      </li>
      <li class="breadcrumb-item active">
        <span>Update Gym</span>
      </li>
    </ol>
    <div class="app-page-title--first">
      <div class="app-page-title--heading">
        <h1>Update Gym</h1>
      </div>
    </div>
    <div class="d-flex align-items-center">
      <span>Services / Gyms / Update Gym</span>
    </div>
    <div class="d-flex align-items-center">
      <button (click)="backButtonRouting('back')" class="btn btn-sm text-nowrap m-2 btn-second" type="button">
        <span class="d-none d-xl-block" style="color: white">Back</span>
        <span className="btn-wrapper--icon">
          <i class="ion-ios-arrow-back d-block d-xl-none"></i>
                </span>
      </button>
    </div>
  </div>

</div>

<div class="card card-box">
  <div class="card-header">
    <div class="card-header--title">
      <small>Gym Details</small>
      <b>{{this.profileName}}</b>
    </div>
  </div>
  <form autocomplete="off" (keydown.enter)="$event.preventDefault()" name="createProfileForm"
        [formGroup]="createProfileForm">
    <aw-wizard #wizardComponent class="wizard" navBarLocation="left">
      <aw-wizard-step class="screen" stepTitle="Gym Information" [navigationSymbol]="{ symbol: '1' }">
        <div class="p-4" id="wizard1">
          <h5 class="font-size-xl font-weight-bold">Gym Information</h5>
          <!--        <p class="text-black-50 mb-4">Try the keyboard navigation by clicking arrow left or right!</p>-->
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="gymName">Gym Name <span style="color: red">*</span></label>
              <input class="form-control" name="gymName" formControlName="gymName" id="gymName"
                     placeholder="Gym Name" type="text">
            </div>
            <!--            <div class="form-group col-md-6">-->
            <!--              <label for="brn">Business Registration Number</label>-->
            <!--              <input class="form-control" name="brn" formControlName="brn" id="brn"-->
            <!--                     placeholder="Business Registration Number" type="text">-->
            <!--            </div>-->
          </div>

          <div id="profileImgDiv" class="form-group col-md-6">
            <label>Profile Image (800 x 800)<span style="color: red">*</span></label>
            <div class="d-flex flex-column flex-sm-row align-items-start">
              <div>
                <div class="card card-transparent mb-3 mb-sm-0">
                  <a (click)="uploadNewImage()" class="card-img-wrapper rounded">
                    <div class="img-wrapper-overlay">
                      <div class="overlay-btn-wrapper">
                        <button  class="btn btn-pill btn-sm btn-outline-secondary border-0 shadow-none pl-2 pr-2 mx-auto d-flex align-items-center"
                                 type="button">
                          <fa-icon [icon]="['fas', 'camera-retro']" class="font-size-lg"></fa-icon>
                        </button>
                      </div>
                    </div>
                    <img  class="card-img-top rounded"
                          [src]="profilePic" style="width: 250px;height: 200px">
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div id="ngxDiv" hidden class="form-group col-md-6">
              <label>Profile Image (800 x 800)<span style="color: red">*</span></label>
              <ngx-img #ngimg class="file-multi" (onSelect)="onSelectProfileImage($event)" (onReset)="onResetProfileImage()"
                       [config]="options" [text]="textOption"></ngx-img>
            </div>
            <div hidden style="left: 3%;padding-top: 45px;" id="profileImagePreview" class="form-group col-md-6">
              <label>Preview</label>
              <div class="d-flex flex-column flex-sm-row align-items-start">
                <div>
                  <div style="zoom: 22%" class="card card-transparent mb-3 mb-sm-0">
                    <a class="card-img-wrapper rounded">
                      <div class="img-wrapper-overlay">
                        <div class="overlay-btn-wrapper">
                        </div>
                      </div>
                      <img  class="card-img-top rounded"
                            [src]='profileImage||"assets/images/no-image-available.png"' style="width: 800px;height: 800px">
                    </a>
                  </div>
                </div>
                <div style="padding-left: 2%;padding-top: 2%;">
                  <button (click)="clear()" class="btn d-50 p-0 btn-pill m-2 btn-sm btn-danger"
                          type="button">
                <span class="btn-wrapper--icon" >
                    <i style="transform: scale(2);" class="pe-7s-close"></i>
                </span>
                  </button>
                </div>
              </div>

            </div>
          </div>
          <div class="form-group">
            <label>Cover images (Max 3) (800 x 800)<span style="color: red">*</span></label>
            <div class="form-row">
              <div class="form-group col-md-6">
                <ngx-img #coverImg class="file-multi" (onSelect)="onSelect($event)" (onReset)="onReset()"
                         [config]="options" [text]="textOption"></ngx-img>
              </div>
              <div hidden style="left: 3%;padding-top: 16px;" id="imgPreviewTable" class="form-group col-md-6">
                <label>Preview</label>
                <div class="d-flex flex-column flex-sm-row align-items-start">
                  <div>
                    <div style="zoom: 22%" class="card card-transparent mb-3 mb-sm-0">
                      <a class="card-img-wrapper rounded">
                        <div class="img-wrapper-overlay">
                          <div class="overlay-btn-wrapper">
                          </div>
                        </div>
                        <img  class="card-img-top rounded"
                              [src]='base64Image||"assets/images/no-image-available.png"' style="width: 800px;height: 800px">
                      </a>
                    </div>
                  </div>
                  <div style="padding-left: 2%;padding-top: 2%;">
                    <button  (click)="addCoverImages(base64Image)" class="btn d-50 p-0 btn-pill m-2 btn-sm btn-success"
                             type="button">
                <span class="btn-wrapper--icon" >
                    <i style="transform: scale(2);" class="pe-7s-check"></i>
                </span>
                    </button>
                    <br>
                    <button  (click)="onResetCover()" class="btn d-50 p-0 btn-pill m-2 btn-sm btn-danger"
                             type="button">
                <span class="btn-wrapper--icon" >
                    <i style="transform: scale(2);" class="pe-7s-close"></i>
                </span>
                    </button>
                  </div>
                </div>
              </div>

              <div hidden class="form-group col-md-12" id="imgTable">
                <!--                <perfect-scrollbar [autoPropagation]="true" class="scroll-area-sm mb-2">-->
                <div class="table-responsive">
                  <table class="table table-hover text-nowrap table-borderless mb-0">
                    <tbody>
                    <tr *ngFor="let status of images">
                      <td style="width: 15%">
                        <img style='display:block;border: 2px dashed  #3C44B1;
                          border-radius: 5px; width:100px;height:80px;' id='base'
                             [src]='status.img'/>
                      </td>
                      <td disabled="true">
                        <div class="gauge-wrapper" style="height: 75px">
                          <circle-progress style="pointer-events: none;"
                                           [percent]="100"
                                           [radius]="100"
                                           [outerStrokeWidth]="14"
                                           [innerStrokeWidth]="11"
                                           [outerStrokeColor]="'var(--success)'"
                                           [innerStrokeColor]="'var(--secondary)'"
                                           [animation]="true"
                                           [responsive]="true"
                                           [showSubtitle]="false"
                                           [titleFontSize]="42"
                                           [unitsFontSize]="29"
                                           [showBackground]="false"
                                           [showSubtitle]="false"
                                           [animationDuration]="2000"
                          ></circle-progress>
                        </div>
                      </td>
                      <td>
                        <button (click)="removeImageList(status.img)" class="btn d-50 p-0 btn-pill m-2 btn-danger"
                                type="button">
                <span class="btn-wrapper--icon">
                    <i class="ion-md-trash"></i>
                </span>
                        </button>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <!--                </perfect-scrollbar>-->
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="profileDescription">Description <span style="color: red">*</span></label>
            <textarea  (keyup)="checkCharacterLength();newLinePress($event)" maxlength="1000" name="profileDescription"
                       formControlName="profileDescription" rows="3" class="form-control" id="profileDescription"
                       placeholder="Description"></textarea>
            <span><small><b>{{characterLength}}/1000 characters</b></small></span>
          </div>
          <div hidden class="form-group">
            <label for="location">Location <span style="color: red">*</span></label>
            <ng-select id="location"  formControlName="location">
              <ng-option *ngFor="let val of locations" [value]="val.id">{{val.name}}</ng-option>
            </ng-select>
          </div>
          <div class="form-group">
            <label>Open In Week Days&nbsp; <small>
              <ui-switch  style="padding-left: 20px;" [checked]="isWeekDayOpen" checkedLabel="yes"  (change)="weekDayToggleFunction($event)" id="weekDay" size="small" uncheckedLabel="no"></ui-switch>
            </small>&nbsp;<span style="color: red">*</span>
            </label>
          </div>
          <div hidden id="weekDayHourDiv">
            <div class="form-row">
              <label>Week Days Opening hours</label>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label>From <span style="color: red">*</span></label>
                <timepicker [(ngModel)]="from" formControlName="startTime" (isValid)="isValid = $event"></timepicker>
              </div>
              <div style="display: grid;" class="form-group col-md-6">
                <label>To<span style="color: red">*</span></label>
                <timepicker [(ngModel)]="to" formControlName="endTime" (isValid)="isValid = $event"></timepicker>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Open In Weekend&nbsp; <small>
              <ui-switch style="padding-left: 33px;" checkedLabel="yes" [checked]="isWeekendOpen"  (change)="weekendDayToggleFunction($event)" id="weekend" size="small" uncheckedLabel="no"></ui-switch>
            </small>&nbsp;<span style="color: red">*</span>
            </label>
          </div>
          <div hidden id="tablediv">
            <div class="form-row">
              <div class="table-responsive screen">
                <table style="width: 100%;">
                  <tbody>
                  <tr>
                    <td style="text-align: center"><h5>Saturday</h5></td>
                    <td><timepicker [disabled]="isSaturadayOpen" [(ngModel)]="saturdayStartTime" formControlName="saturdayFrom" (isValid)="isValid = $event"></timepicker></td>
                    <td><timepicker [disabled]="isSaturadayOpen" [(ngModel)]="saturdayEndTime" formControlName="saturdayTo" (isValid)="isValid = $event"></timepicker></td>
                    <td> <label><small>
                      <ui-switch [checked]="isCheckedSaturday" id="saturdayOpen" style="padding-left: 33px;" checkedLabel="yes" (change)="saturdayOpen($event)" size="small" uncheckedLabel="no"></ui-switch>
                    </small>
                    </label></td>
                  </tr>
                  <tr>
                    <td style="text-align: center"><h5>Sunday</h5></td>
                    <td><timepicker [disabled]="isSundayOpen" [(ngModel)]="sundayStartTime" formControlName="sundayFrom" (isValid)="isValid = $event"></timepicker></td>
                    <td><timepicker [disabled]="isSundayOpen" [(ngModel)]="sundayEndTime" formControlName="sundayTo" (isValid)="isValid = $event"></timepicker></td>
                    <td> <label><small>
                      <ui-switch [checked]="isCheckedSunday" id="sundayOpen" style="padding-left: 33px;" checkedLabel="yes" (change)="sundayOpen($event)" size="small" uncheckedLabel="no"></ui-switch>
                    </small>
                    </label></td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>Closed On SpecificDay&nbsp; <small>
              <ui-switch checkedLabel="yes" id="specificDay" [checked]="isClosedSpecificDay" (change)="specificDayToggleFunction($event)" size="small" uncheckedLabel="no"></ui-switch>
            </small>
            </label>
          </div>
          <div hidden id="specificDayDiv">
            <div class="form-row">
              <div class="form-group col-md-12">
                <label>Special notes of GYM opening time</label>
                <textarea  (keyup)="checkDescriptionLength();descriptionNewLinePress($event)" maxlength="100" name="specificDescription"
                           formControlName="specificDescription" rows="3" class="form-control" id="specificDescription"
                           placeholder="Description"></textarea>
                <span><small><b>{{descriptionLength}}/100 characters</b></small></span>
              </div>
            </div>
          </div>

          <!--          <div><strong>Is input valid:</strong> <pre>{{ !f.form.controls['phone'].invalid }}</pre></div>-->
        </div>
        <div class="actions p-4">
          <button (click)="backButtonRouting('previous')" class="btn btn-primary" type="button">Cancel</button>
          <button (click)="clickGymInformationWizard()" class="btn btn-success" type="button">Continue</button>
        </div>
      </aw-wizard-step>

      <aw-wizard-step class="screen" awOptionalStep stepTitle="More Info" [navigationSymbol]="{ symbol: '2' }">
        <div class="p-4" id="wizard2">
          <h5 class="font-size-xl font-weight-bold">More Info</h5>
          <hr>
          <div class="form-row">
            <div class="form-group col-md-7">
              <div class="form-row">
                <div class="col">
                  <h5><b>Facilities</b></h5>
                </div>
                <div>
                  <div class="custom-checkbox custom-control align-self-start">
                    <input (change)="markAllFacilities()"  class="custom-control-input" id="inputCheckbox1" type="checkbox">
                    <label class="custom-control-label" for="inputCheckbox1">&nbsp;</label> Select All</div>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table class="table table-striped table-bordered  mb-0">
                    <thead class="thead-light">
                    <tr>
                      <th>
                      </th>
                      <th>Facilities List</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let val of facilities">
                      <td class="text-center">
                        <div style="cursor: pointer" class="custom-checkbox custom-control align-self-start">
                          <input [checked]="returnMarkedFacilities(val)" (change)="markFacilities(val)" class="custom-control-input" [id]="val.name" type="checkbox">
                          <label class="custom-control-label" [htmlFor]="val.name">&nbsp;</label>
                        </div>
                      </td>
                      <td>
                        <b><span>{{val.name}}</span></b>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div class="card-footer py-3 d-flex justify-content-between">
                  <pagination *ngIf="facilities.length > 10" [boundaryLinks]="true"
                               [rotate]="false"
                               (numPages)="facilitiesNumPages = $event"
                               [firstText]="first"
                               [lastText]="last"
                               [itemsPerPage]="10"
                               (pageChanged)="facilitiesTableChanged($event)"
                               [totalItems]="facilities.length"  class="pagination-icons pagination-second"></pagination>

                </div>
              </div>
            </div>
            <div class="divider"></div>
            <div class="divider"></div>
            <div class="divider"></div>
            <div class="form-group col-md-7">
              <div class="form-row">
                <div class="col">
                  <h5><b>Equipments </b></h5>
                </div>
                <div>
                  <div class="custom-checkbox custom-control align-self-start">
                    <input (change)="markAllEquipments()" class="custom-control-input" id="inputCheckbox2" type="checkbox">
                    <label class="custom-control-label" for="inputCheckbox2">&nbsp;</label>Select All</div>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table class="table table-striped table-bordered  mb-0">
                    <thead class="thead-light">
                    <tr>
                      <th></th>
                      <th>Equipments  List</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let val of equipmentsReturnedArray">
                      <td class="text-center">
                        <div style="cursor: pointer" class="custom-checkbox custom-control align-self-start">
                          <input [checked]="returnMarkedEquipments(val)" (change)="markEquipments(val)" class="custom-control-input" [id]="val.name" type="checkbox">
                          <label class="custom-control-label" [htmlFor]="val.name">&nbsp;</label>
                        </div>
                      </td>
                      <td>
                        <b><span>{{val.name}}</span></b>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
                <div class="card-footer py-3 d-flex justify-content-between">
                  <pagination *ngIf="equipments.length > 10" [boundaryLinks]="true"
                               [rotate]="false"
                               (numPages)="numPages = $event"
                               [firstText]="first"
                               [lastText]="last"
                               [itemsPerPage]="10"
                               (pageChanged)="equipmentsTableChanged($event)"
                               [totalItems]="equipments.length"  class="pagination-icons pagination-second"></pagination>

                </div>
              </div>
            </div>
            <div class="form-group col-md-12">
              <label for="videoURl">Video URL</label>
              <input class="form-control" name="videoURl" formControlName="videoURl" id="videoURl"
                     placeholder="Video URL" type="text">
            </div>
          </div>
        </div>
        <div class="actions p-4">
          <button (click)="autoScrollBusinessProfileWizard()" awPreviousStep class="btn btn-primary" type="button">Previous</button>
          <button  (click)="updateGym()" class="btn btn-success" data-style="slide-down" data-spinner-size="30" [ladda]="isLoading" id="finishButton" type="button">Update</button>
        </div>
      </aw-wizard-step>
    </aw-wizard>
  </form>
</div>
